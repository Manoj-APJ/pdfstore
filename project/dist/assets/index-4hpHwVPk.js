import{c as h,r as p,j as e,s as i}from"./index-CYlx8I9C.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=h("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function y(){const[d,c]=p.useState(!1),[t,s]=p.useState({title:"",description:"",price:"",category:"",pdfFile:null,coverImage:null}),u=(r,o)=>{var l;const a=(l=r.target.files)==null?void 0:l[0];a&&s(n=>({...n,[o==="pdf"?"pdfFile":"coverImage"]:a}))},g=async r=>{if(r.preventDefault(),!(!t.pdfFile||!t.coverImage))try{c(!0);const o=`pdfs/${Date.now()}-${t.pdfFile.name}`,{error:a}=await i.storage.from("pdf-files").upload(o,t.pdfFile);if(a)throw a;const l=`covers/${Date.now()}-${t.coverImage.name}`,{error:n}=await i.storage.from("pdf-files").upload(l,t.coverImage);if(n)throw n;const f=i.storage.from("pdf-files").getPublicUrl(o).data.publicUrl,x=i.storage.from("pdf-files").getPublicUrl(l).data.publicUrl,{error:m}=await i.from("pdfs").insert({title:t.title,description:t.description,price:parseFloat(t.price),category:t.category,file_url:f,cover_image:x});if(m)throw m;s({title:"",description:"",price:"",category:"",pdfFile:null,coverImage:null}),alert("PDF uploaded successfully!")}catch(o){console.error("Error uploading PDF:",o),alert("Error uploading PDF. Please try again.")}finally{c(!1)}};return e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),e.jsx("input",{type:"text",required:!0,value:t.title,onChange:r=>s(o=>({...o,title:r.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{required:!0,value:t.description,onChange:r=>s(o=>({...o,description:r.target.value})),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Price ($)"}),e.jsx("input",{type:"number",required:!0,min:"0",step:"0.01",value:t.price,onChange:r=>s(o=>({...o,price:r.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),e.jsxs("select",{required:!0,value:t.category,onChange:r=>s(o=>({...o,category:r.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"Select a category"}),e.jsx("option",{value:"Education",children:"Education"}),e.jsx("option",{value:"Business",children:"Business"}),e.jsx("option",{value:"Technology",children:"Technology"}),e.jsx("option",{value:"Design",children:"Design"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"PDF File"}),e.jsx("input",{type:"file",required:!0,accept:".pdf",onChange:r=>u(r,"pdf"),className:"mt-1 block w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cover Image"}),e.jsx("input",{type:"file",required:!0,accept:"image/*",onChange:r=>u(r,"cover"),className:"mt-1 block w-full"})]}),e.jsxs("button",{type:"submit",disabled:d,className:"flex items-center justify-center w-full px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-gray-400",children:[e.jsx(b,{className:"w-5 h-5 mr-2"}),d?"Uploading...":"Upload PDF"]})]})}function j(){return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Admin Dashboard"}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Upload New PDF"}),e.jsx(y,{})]})]})}export{j as default};
